/**
 * 角色表
 * 支持层级化的角色体系，用于 RBAC 权限管理
 */
model Role {
  /**
   * 角色ID
   */
  id          String   @id @default(cuid())
  /**
   * 角色名称（英文标识符，如 superAdmin, admin, editor）
   */
  name        String   @unique
  /**
   * 角色显示名称（中文，如 超级管理员, 编辑）
   */
  displayName String?
  /**
   * 角色描述
   */
  description String?
  /**
   * 父角色ID（用于角色层级和权限继承）
   */
  parentId    String?
  /**
   * 角色层级（用于角色排序和权限计算）
   */
  level       Int      @default(0)
  /**
   * 是否为系统内置角色（系统角色不可删除）
   */
  isSystem    Boolean  @default(false)

  /**
   * 父角色关系
   */
  parent      Role?                @relation("RoleHierarchy", fields: [parentId], references: [id])
  /**
   * 子角色列表
   */
  children    Role[]               @relation("RoleHierarchy")
  /**
   * 角色权限关联
   */
  permissions RolePermission[]
  /**
   * 用户角色关联
   */
  userRoles   UserRole[]

  /**
   * 创建时间
   */
  createdAt   DateTime @default(now()) @map("created_at")
  /**
   * 更新时间
   */
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@index([name])
  @@index([parentId])
  @@map("roles")
}
