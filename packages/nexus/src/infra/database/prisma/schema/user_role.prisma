/**
 * 用户角色关联模型
 *
 * 用于支持用户的多角色授权和角色继承
 */
model UserRole {
  /// 关联 ID
  id        String   @id @default(cuid())

  /// 用户 ID
  userId    String

  /// 角色 ID
  roleId    String

  /// 授权人 ID（记录是谁给该用户分配的角色）
  assignedBy String?   @map("assigned_by")

  /// 授权时间
  assignedAt DateTime @default(now()) @map("assigned_at")

  /// 关联用户
  user User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  /// 关联角色
  role Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)

  /// 联合唯一索引：同一用户不能重复分配同一角色
  @@unique([userId, roleId])
  @@index([userId])
  @@map("user_roles")
}
